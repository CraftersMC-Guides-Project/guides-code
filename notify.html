<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>FCM Push Example</title>
    <script type="module">
        // Import Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
        import { getMessaging, getToken, onMessage } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-messaging.js";

        // TODO: Replace with your own Firebase config
        const firebaseConfig = {
            apiKey: "AIzaSyC9HDieVtkTu_PrSumxoDi1plXduu-J5pg",
            authDomain: "craftersmc-guides.firebaseapp.com",
            projectId: "craftersmc-guides",
            storageBucket: "craftersmc-guides.firebasestorage.app",
            messagingSenderId: "647290515320",
            appId: "1:647290515320:web:44e1be1528c86af00d628d",
            measurementId: "G-K3WGXSF9DQ"

        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const messaging = getMessaging(app);

        // Request notification permission and get FCM token
        async function initFCM() {
            try {
                const permission = await Notification.requestPermission();
                if (permission === "granted") {
                    const token = await getToken(messaging, {
                        vapidKey: " BBX00DXJcQ8ecENr3uNTxXsaZFv35UGNeKCbOWe6rU-pTSYOzbmb3-CCF0-QWwo927V1n4Y7MEmoART-JooYrdk" // from Firebase Console → Project Settings → Cloud Messaging
                    });
                    console.log("FCM Token:", token);
                    alert("Your FCM Token:\n" + token);
                } else {
                    console.log("Permission not granted for notifications.");
                }
            } catch (err) {
                console.error("Error initializing FCM", err);
            }
        }

        // Listen for messages when page is open
        onMessage(messaging, (payload) => {
            console.log("Message received. ", payload);
            alert("Notification received: " + payload.notification.title);
        });

        window.initFCM = initFCM;
    </script>
</head>

<body>
    <h1>Firebase Push Notifications Example</h1>
    <button onclick="initFCM()">Enable Notifications</button>
</body>

</html>